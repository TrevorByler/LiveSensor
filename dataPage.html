<!DOCTYPE html>
<html>

<head>
  <title>Data Page</title>
  <link rel="stylesheet" href="stylesheet.css">
</head>
<style>
  body {
    background-color: #379683;
  }
</style>

<body>

  <div class="header">

    <h2>Jamler</h2>
    <h5>Interactive Night Light</h5>
  </div>


  <div class="nav">
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="dataPage.html">Real-Time Data</a></li>
      <li><a href="documentation.html">Documentation</a></li>

    </ul>
  </div>

  <div class="content">
    <h2><u>Data</u></h2>

  </div>

  <input type="radio" id="5min" name="timespan" value="minute" checked>
  <label for="minute">Past 5 Minutes</label><br>
  <input type="radio" id="day" name="timespan" value="day">
  <label for="female">Past 24 hours</label><br>
  <button onclick="callPHP(document.querySelector('input[name=" timespan"]:checked').value>
    Refresh Data</button>

  <div id="chart-container">FusionCharts will render here</div>
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script src="js/fusioncharts.js"></script>
  <script src="js/fusioncharts.charts.js"></script>
  <script src="js/themes/fusioncharts.theme.zune.js"></script>
  <!-- <script src="js/app.js"></script> -->
  <script>
    function callPHP(params) {
      var httpc = new XMLHttpRequest(); // simplified for clarity
      var url = "http://localhost/chart_data.php";
      httpc.open("POST", url, true); // sending as POST

      httpc.onreadystatechange = function () { //Call a function when the state changes.
        if (httpc.readyState == 4 && httpc.status == 200) { // complete and no errors

          chartData = data;
          const chartConfig = {
            type: 'line',
            renderAt: 'chart-container',
            width: '100%',
            height: '400',
            dataFormat: 'json',
            dataSource: {
              // Chart Configuration
              "chart": {
                "caption": "Room Brightness",
                "xAxisName": "Timestamp",
                "yAxisName": "Level of Visible Light",
                "theme": "fusion",
              },
              // Chart Data
              "data": chartData
            }
          };
          var apiChart = new FusionCharts(chartConfig);
          apiChart.render();
        }
      }
      httpc.send(params);
    }
  </script>
</body>

</html>